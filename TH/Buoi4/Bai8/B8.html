<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bai 8</title>
</head>
<body>
    <div class="content">
        <div class="data">
            <table id="dataTable" class="center">
                <tr style="text-align: center;">
                    <td class="border-column">STT</td>
                    <td class="border-column">Tên VXL</td>
                    <td class="border-column">Hãng SX</td>
                    <td class="border-column">Ngày ra mắt</td>
                    <td class="border-column">Giá (vnđ)</td>
                </tr>
            </table>
        </div>

        <div class="addData">
            <table id="addDataTable" class="center">
                <tr>
                    <td>Tên VXL</td>
                    <td><input type="text" id="cpuName"></td>
                </tr>
                <tr>
                    <td>Hãng</td>
                    <td><input type="text" id="cpuFirm"></td>
                </tr>
                <tr>
                    <td>Ngày ra mắt</td>
                    <td><input type="date" id="cpuDate"></td>
                </tr>
                <tr>
                    <td>Giá</td>
                    <td><input type="number" id="cpuPrice"></td>
                </tr>
                <tr>
                    <td></td>
                    <td dir="rtl">
                        <input type="button" value="Hủy" onclick="cancel()">
                        <input type="button" value="Thêm" onclick="add()">
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <style>
        * {
            box-sizing: border-box;
        }
        .right {
            margin-left: auto;
        }
        .center {
            margin-left: auto;
            margin-right: auto;
        }

        table, .border-column {
            border: 1px solid #333;
        }

        .border-column {
            padding: 4px 16px;
        }

        .addData {
            margin-top: 100px;
        }
        #addDataTable {
            padding: 12px;
        }
    </style>

    <script>
        let inpName = document.getElementById("cpuName");
        let inpFirm = document.getElementById("cpuFirm");
        let inpDate = document.getElementById("cpuDate");
        let inpPrice = document.getElementById("cpuPrice");
        let dataTable = document.getElementById("dataTable");
        let row = 0;

        function add() {
            let name = inpName.value.trim();
            let firm = inpFirm.value.trim();
            let date = inpDate.value;
            let price = inpPrice.value.trim();
            if (!checkValid(name, firm, date, price)) {
                alert("Nhập lại");
            } else {
                let newRow = dataTable.insertRow(-1);
                let cell1 = newRow.insertCell(0);
                let cell2 = newRow.insertCell(1);
                let cell3 = newRow.insertCell(2);
                let cell4 = newRow.insertCell(3);
                let cell5 = newRow.insertCell(4);
                
                cell1.classList.add("border-column");
                cell2.classList.add("border-column");
                cell3.classList.add("border-column");
                cell4.classList.add("border-column");
                cell5.classList.add("border-column");

                cell1.innerHTML = row+1;
                cell2.innerHTML = name;
                cell3.innerHTML = firm;
                cell4.innerHTML = formatDate(date);
                cell5.innerHTML = price;

                row++;

                cancel();
            }
        }

        function cancel() {
            inpName.value="";
            inpFirm.value="";
            inpDate.value="";
            inpPrice.value="";
        }

        function checkValid(name, firm, date, price) {
            if (name=="" || firm=="" || date=="" || price=="" || price<=0 || !validDate(inpDate.value)) return false;
            else return true;
        }

        function validDate(date) {
            let now = new Date();
            let timeCheck = new Date(date);
            if (timeCheck.getTime() <= now.getTime()) return true;
            else return false;
        }

        function formatDate(date) {
            let x = date.split("-");
            [x[0], x[2]] = [x[2], x[0]];
            return x.join("/");
        }
    </script>
</body>
</html>